# =============================================================================
# KOmcp Environment Configuration
# =============================================================================
# Copy this file to .env and configure with your actual values
# DO NOT commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3003
HOST=0.0.0.0

# Public URL of this MCP server (used for OAuth audience validation)
# Development: http://localhost:3003
# Production: https://mcp.example.com
BASE_URL=http://localhost:3003

# -----------------------------------------------------------------------------
# KOauth OAuth2 Server Integration
# -----------------------------------------------------------------------------
# Base URL of your KOauth OAuth2 server
KOAUTH_URL=https://auth.example.com

# JWKS endpoint for JWT token verification
# This endpoint provides public keys to verify JWT signatures
KOAUTH_JWKS_URL=https://auth.example.com/.well-known/jwks.json

# Dynamic Client Registration endpoint (RFC 7591)
# Claude uses this to register as an OAuth client
KOAUTH_CLIENT_REGISTRATION_URL=https://auth.example.com/oauth/register

# -----------------------------------------------------------------------------
# Kura Database Connection (Read-Only)
# -----------------------------------------------------------------------------
# PostgreSQL connection string for Kura database
# Format: postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE
# IMPORTANT: Use a READ-ONLY database user for security
KURA_DATABASE_URL=postgresql://komcp_readonly:password@localhost:5432/kura

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# CORS allowed origins (comma-separated)
# For Claude web: https://claude.ai
# For Claude desktop: https://desktop.claude.ai
# Multiple origins: https://claude.ai,https://desktop.claude.ai
ALLOWED_ORIGINS=https://claude.ai

# Rate limiting configuration
# Maximum requests per time window
RATE_LIMIT_MAX=100

# Time window in milliseconds (60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: fatal, error, warn, info, debug, trace
# Development: debug or trace
# Production: info or warn
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Optional: Embedding Service Configuration
# -----------------------------------------------------------------------------
# If using external embedding service (e.g., OpenAI)
# OPENAI_API_KEY=sk-...
# OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# If using local embedding model
# EMBEDDING_MODEL_PATH=/path/to/model

# -----------------------------------------------------------------------------
# Optional: Monitoring & Observability
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://...
# DATADOG_API_KEY=...
# PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# Optional: Feature Flags
# -----------------------------------------------------------------------------
# ENABLE_DEBUG_ENDPOINTS=false
# ENABLE_METRICS=true
